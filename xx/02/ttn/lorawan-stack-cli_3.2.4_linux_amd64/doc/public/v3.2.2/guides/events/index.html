<!DOCTYPE html>

<html class="has-navbar-fixed-top">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="generator" content="Hugo 0.58.3" />
  <title>Working with Events | The Things Stack for LoRaWAN</title>
  <link rel="canonical" href="https://thethingsstack.io/v3.2.2/guides/events/" />
  <link rel="icon" type="image/png" href="/v3.2.2/favicon.png">
  <link rel="stylesheet" href="https://thethingsstack.io/v3.2.2/css/theme.min.05e5f0bb7626dd7a8091d25b84ba7fa78c5e42932230faba442c546a93956d46.css" integrity="sha256-BeXwu3Ym3XqAkdJbhLp/p4xeQpMiMPq6RCxUapOVbUY=">
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta itemprop="name" content="Working with Events">
  <meta itemprop="description" content="">
  <meta itemprop="keywords" content="">
  <meta property="og:title" content="Working with Events">
  <meta property="og:description" content="">
  <meta property="og:url" content="https://thethingsstack.io/v3.2.2/guides/events/">
  <meta name="twitter:title" content="Working with Events" />
  <meta name="twitter:description" content="" />
  <meta name="twitter:card" content="summary" />
</head>


<body>

<nav class="navbar is-fixed-top" role="navigation" aria-label="main navigation">
  <div class="container">
    <div class="navbar-brand">
      <a class="navbar-item" href="/v3.2.2/">
        <img src="/v3.2.2/img/TTS-logo.svg">
      </a>
      <span class="navbar-burger burger" data-target="topMenu">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </div>
    <div id="topMenu" class="navbar-menu">
      <div class="navbar-start">
        <a class="navbar-item" href="/v3.2.2/guides/">Guides</a>
        <a class="navbar-item" href="/v3.2.2/concepts/">Concepts</a>
        <a class="navbar-item" href="/v3.2.2/components/">Components</a>
        <a class="navbar-item" href="/v3.2.2/reference/">Reference</a>
      </div>
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/TheThingsNetwork/lorawan-stack">GitHub</a>
        <a class="navbar-item" href="https://www.thethingsnetwork.org/forum/c/network-and-routing/v3">Forum</a>
        <div class="navbar-item">
          <a class="button is-primary" href="/v3.2.2/download/">Get The Things Stack</a>
        </div>
      </div>
    </div>
  </div>
</nav>


<main>
<section class="section">
  <div class="container">
    <div class="columns">
      
      <div class="column is-one-third">


<h2 class="title is-size-4">Working with Events</h2>

<ul class="menu-list">
<a href="https://thethingsstack.io/v3.2.2/guides/events/" class="is-active">Overview</a>
</ul>





      </div>
      
      <div class="column is-two-thirds">

<h1 class="title is-size-2">Working with Events</h1>

<div class="content"><p>The Things Stack generates lots of events that allow you to get insight in what is going on. You can subscribe to application, gateway, end device events, as well as to user, organization and OAuth client events.</p>

<p>This guide shows how to subscribe to events with the CLI and with the HTTP API.</p>

<h2 id="subscribe-with-cli">Subscribe with CLI</h2>

<p>To follow your gateway <code>gtw1</code> and application <code>app1</code> events at the same time:</p>

<pre><code class="language-bash">$ ttn-lw-cli events subscribe --gateway-id gtw1 --application-id app1
</code></pre>

<h2 id="subscribe-with-http">Subscribe with HTTP</h2>

<p>You can get streaming events with <code>curl</code>. For this, you need an API key for the entities you want to watch, for example:</p>

<pre><code class="language-bash">$ ttn-lw-cli user api-key create \
  --user-id admin \
  --right-application-all \
  --right-gateway-all
</code></pre>

<p>With the created API key:</p>

<pre><code>$ curl https://thethings.example.com/api/v3/events \
  -X POST \
  -H 'Authorization: Bearer NNSXS.BR55PTYILPPVXY..' \
  --data '{&quot;identifiers&quot;:[{&quot;application_ids&quot;:{&quot;application_id&quot;:&quot;app1&quot;}},{&quot;gateway_ids&quot;:{&quot;gateway_id&quot;:&quot;gtw1&quot;}}]}'
</code></pre>

<blockquote>
<p>Note: The created API key for events is highly privileged; do not use it if you don&rsquo;t need it for events.</p>
</blockquote>

<h2 id="example-join-flow">Example: join flow</h2>

<p>These are the events of a typical join flow:</p>

<pre><code class="language-js">{
  &quot;name&quot;: &quot;gs.up.receive&quot;, // Gateway Server received an uplink message from a device.
  &quot;time&quot;: &quot;2019-04-04T09:54:34.786220Z&quot;,
  &quot;identifiers&quot;: [
    {
      &quot;gateway_ids&quot;: {
        &quot;gateway_id&quot;: &quot;multitech&quot;,
        &quot;eui&quot;: &quot;00800000A0000DB4&quot;
      }
    }
  ],
  &quot;correlation_ids&quot;: [
    &quot;gs:conn:01D7KWADW2E5CJA32VS1MTR2J6&quot;,
    &quot;gs:uplink:01D7KWB0N2KVCV8HZABC8DDHSA&quot;
  ]
}
{
  &quot;name&quot;: &quot;js.join.accept&quot;, // Join Server accepted the join-accept.
  &quot;time&quot;: &quot;2019-04-04T09:54:34.806812Z&quot;,
  &quot;identifiers&quot;: [
    {
      &quot;device_ids&quot;: {
        &quot;device_id&quot;: &quot;dev1&quot;,
        &quot;application_ids&quot;: {
          &quot;application_id&quot;: &quot;app1&quot;
        },
        &quot;dev_eui&quot;: &quot;4200000000000000&quot;,
        &quot;join_eui&quot;: &quot;4200000000000000&quot;
      }
    }
  ],
  &quot;correlation_ids&quot;: [
    &quot;rpc:/ttn.lorawan.v3.NsJs/HandleJoin:01D7KWB0NCTDY835V5N3CYWBZK&quot;
  ]
}
{
  &quot;name&quot;: &quot;ns.up.join.forward&quot;, // Network Server forwarded the join-accept and it got accepted.
  &quot;time&quot;: &quot;2019-04-04T09:54:34.808132Z&quot;,
  &quot;identifiers&quot;: [
    {
      &quot;device_ids&quot;: {
        &quot;device_id&quot;: &quot;dev1&quot;,
        &quot;application_ids&quot;: {
          &quot;application_id&quot;: &quot;app1&quot;
        },
        &quot;dev_eui&quot;: &quot;4200000000000000&quot;,
        &quot;join_eui&quot;: &quot;4200000000000000&quot;
      }
    }
  ],
  &quot;correlation_ids&quot;: [
    &quot;gs:conn:01D7KWADW2E5CJA32VS1MTR2J6&quot;,
    &quot;gs:uplink:01D7KWB0N2KVCV8HZABC8DDHSA&quot;,
    &quot;ns:uplink:01D7KWB0N5C1T8TE2HAVBJN5Y4&quot;,
    &quot;rpc:/ttn.lorawan.v3.GsNs/HandleUplink:01D7KWB0N5G2N5C0AFXT4YMF8R&quot;
  ]
}
{
  &quot;name&quot;: &quot;ns.up.merge_metadata&quot;, // Network Server merged metadata of incoming uplink messages.
  &quot;time&quot;: &quot;2019-04-04T09:54:34.991332Z&quot;,
  &quot;identifiers&quot;: [
    {
      &quot;device_ids&quot;: {
        &quot;device_id&quot;: &quot;dev1&quot;,
        &quot;application_ids&quot;: {
          &quot;application_id&quot;: &quot;app1&quot;
        },
        &quot;dev_eui&quot;: &quot;4200000000000000&quot;,
        &quot;join_eui&quot;: &quot;4200000000000000&quot;
      }
    }
  ],
  &quot;data&quot;: {
    &quot;@type&quot;: &quot;type.googleapis.com/google.protobuf.Value&quot;,
    &quot;value&quot;: 1 // There was 1 gateway that received the join-request.
  },
  &quot;correlation_ids&quot;: [
    // Here you find the correlation IDs of all gs.up.receive events that were merged.
    &quot;gs:conn:01D7KWADW2E5CJA32VS1MTR2J6&quot;,
    &quot;gs:uplink:01D7KWB0N2KVCV8HZABC8DDHSA&quot;,
    &quot;ns:uplink:01D7KWB0N5C1T8TE2HAVBJN5Y4&quot;,
    &quot;rpc:/ttn.lorawan.v3.GsNs/HandleUplink:01D7KWB0N5G2N5C0AFXT4YMF8R&quot;
  ]
}
{
  &quot;name&quot;: &quot;as.up.join.receive&quot;, // Application Server receives the join-accept.
  &quot;time&quot;: &quot;2019-04-04T09:54:35.005090Z&quot;,
  &quot;identifiers&quot;: [
    {
      &quot;device_ids&quot;: {
        &quot;device_id&quot;: &quot;dev1&quot;,
        &quot;application_ids&quot;: {
          &quot;application_id&quot;: &quot;app1&quot;
        },
        &quot;dev_eui&quot;: &quot;4200000000000000&quot;,
        &quot;join_eui&quot;: &quot;4200000000000000&quot;,
        &quot;dev_addr&quot;: &quot;0063ECE2&quot;
      }
    }
  ],
  &quot;correlation_ids&quot;: [
    &quot;as:up:01D7KWB0VX1D7G3RKFN9HDA39Q&quot;,
    &quot;gs:conn:01D7KWADW2E5CJA32VS1MTR2J6&quot;,
    &quot;gs:uplink:01D7KWB0N2KVCV8HZABC8DDHSA&quot;,
    &quot;ns:uplink:01D7KWB0N5C1T8TE2HAVBJN5Y4&quot;,
    &quot;rpc:/ttn.lorawan.v3.GsNs/HandleUplink:01D7KWB0N5G2N5C0AFXT4YMF8R&quot;
  ]
}
{
  &quot;name&quot;: &quot;as.up.join.forward&quot;, // Application Server forwards the join-accept to an application (CLI, MQTT, webhooks, etc).
  &quot;time&quot;: &quot;2019-04-04T09:54:35.010243Z&quot;,
  &quot;identifiers&quot;: [
    {
      &quot;device_ids&quot;: {
        &quot;device_id&quot;: &quot;dev1&quot;,
        &quot;application_ids&quot;: {
          &quot;application_id&quot;: &quot;app1&quot;
        },
        &quot;dev_eui&quot;: &quot;4200000000000000&quot;,
        &quot;join_eui&quot;: &quot;4200000000000000&quot;,
        &quot;dev_addr&quot;: &quot;0063ECE2&quot;
      }
    }
  ],
  &quot;correlation_ids&quot;: [
    &quot;as:up:01D7KWB0VX1D7G3RKFN9HDA39Q&quot;,
    &quot;gs:conn:01D7KWADW2E5CJA32VS1MTR2J6&quot;,
    &quot;gs:uplink:01D7KWB0N2KVCV8HZABC8DDHSA&quot;,
    &quot;ns:uplink:01D7KWB0N5C1T8TE2HAVBJN5Y4&quot;,
    &quot;rpc:/ttn.lorawan.v3.GsNs/HandleUplink:01D7KWB0N5G2N5C0AFXT4YMF8R&quot;
  ]
}
{
  &quot;name&quot;: &quot;gs.down.send&quot;, // Gateway Server sent the join-accept to the gateway.
  &quot;time&quot;: &quot;2019-04-04T09:54:35.046147Z&quot;,
  &quot;identifiers&quot;: [
    {
      &quot;gateway_ids&quot;: {
        &quot;gateway_id&quot;: &quot;multitech&quot;,
        &quot;eui&quot;: &quot;00800000A0000DB4&quot;
      }
    }
  ],
  &quot;correlation_ids&quot;: [
    &quot;gs:conn:01D7KWADW2E5CJA32VS1MTR2J6&quot;,
    &quot;rpc:/ttn.lorawan.v3.NsGs/ScheduleDownlink:01D7KWB0W84AJ1P5A3AQV6R4J7&quot;
  ]
}
{
  &quot;name&quot;: &quot;gs.up.forward&quot;, // Gateway Server forwarded join-request to the Network Server.
  &quot;time&quot;: &quot;2019-04-04T09:54:35.991226Z&quot;,
  &quot;identifiers&quot;: [
    {
      &quot;gateway_ids&quot;: {
        &quot;gateway_id&quot;: &quot;multitech&quot;,
        &quot;eui&quot;: &quot;00800000A0000DB4&quot;
      }
    }
  ],
  &quot;correlation_ids&quot;: [
    &quot;gs:conn:01D7KWADW2E5CJA32VS1MTR2J6&quot;,
    &quot;gs:uplink:01D7KWB0N2KVCV8HZABC8DDHSA&quot;
  ]
}
</code></pre></div>


<div class="is-clearfix">
</div>




      </div>
    </div>
  </div>
</section>
</main>

<footer class="footer has-background-primary">
  <div class="container">
    <div class="columns">
      <nav class="column is-one-quarter">
        <h3 class="title is-6">The Things Stack</h3>
        <p><a class="" href="/v3.2.2/guides/">Guides</a></p>
        <p><a class="" href="/v3.2.2/concepts/">Concepts</a></p>
        <p><a class="" href="/v3.2.2/components/">Components</a></p>
        <p><a class="" href="/v3.2.2/reference/">Reference</a></p>
      </nav>
      <nav class="column is-one-quarter">
        <h3 class="title is-6">Contributing</h3>
        <p><a class="" href="https://github.com/TheThingsNetwork/lorawan-stack">GitHub</a></p>
        <p><a class="" href="https://www.thethingsnetwork.org/forum/c/network-and-routing/v3">Forum</a></p>
      </nav>
      
      <nav class="column is-one-quarter">
        <h3 class="title is-6">About Us</h3>
        <p><a class="" href="https://www.thethingsnetwork.org">The Things Network</a></p>
        <p><a class="" href="https://www.thethingsindustries.com">The Things Industries</a></p>
      </nav>
      <div class="column is-one-quarter">
        <h3 class="title is-6">About this page</h3>
        <div class="content">
<p class="has-text-light is-size-7">
  Last changed by Hylke Visser on 11 Oct 2019.
  <br>
  <a href="https://github.com/TheThingsNetwork/lorawan-stack/commit/2ef55b78ce00baf704eff59c9604f970295a7c1d">
      doc: Fix content of summaries
    </a>
</p>

<a href="https://github.com/TheThingsNetwork/lorawan-stack/edit/master/doc/content/guides/events/_index.md" class="button is-primary is-small is-inverted is-outlined">Edit on Github</a>
</div>

      </div>
    </div>
  </div>
</footer>
<script src="https://thethingsstack.io/v3.2.2/js/theme.min.df15d52bc4d1307cdd17a69bb1c802fb4d36b2e7b3411817277dc80c16b97f3c.js" integrity="sha256-3xXVK8TRMHzdF6abscgC&#43;002suezQRgXJ33IDBa5fzw="></script>


</body>

</html>
